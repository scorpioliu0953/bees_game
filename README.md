# BEES - 現代小蜜蜂射擊遊戲

使用 **React + TypeScript + Vite + Canvas** 打造的街機風格小蜜蜂射擊遊戲，具備完整的武器升級系統、Boss 戰、僚機與護衛球、碎片永久升級、獎勵關卡、線上排行榜等豐富機制。

## Demo

**[立即遊玩 → https://scorpioliu0953.github.io/bees_game/](https://scorpioliu0953.github.io/bees_game/)**

## 遊戲畫面

- 動態星空背景與螢幕震動效果
- 像素風格戰機與敵機（8×8 pixel art）
- 霓虹光效子彈、追蹤雷球與爆炸粒子
- Boss 血條 UI 與階段轉換閃光
- 護盾光環、僚機編隊、護衛球旋轉

## 操作說明

| 按鍵 | 功能 |
|------|------|
| `← / →` 方向鍵 | 控制戰機左右移動 |
| `Space` | 暫停 / 繼續 |
| 觸控滑動（手機） | 控制戰機位置 |
| 點擊畫面上方 1/3（手機） | 暫停 / 繼續 |

> 子彈會自動發射，無需手動按鍵。

## 遊戲機制

### 敵機類型

| 類型 | 顏色 | 特性 |
|------|------|------|
| YELLOW | 黃色 | 最後排，2 HP，分數最高 |
| PURPLE | 紫色 | 會俯衝追蹤玩家（高機率） |
| RED | 紅色 | 前排，1 HP，會俯衝追蹤玩家（中機率） |
| BOSS | 紅色大型 | 每 5 關出現，大量 HP，密集彈幕，多階段攻擊 |

- 所有敵機都有機率朝玩家位置俯衝
- 俯衝時會追蹤玩家的 X 座標
- 敵機陣列每 5 關增加 10% 數量（同時縮小以維持佈局）
- 敵機子彈速度每關增加 1%
- 菁英敵機隨機出現，擊殺必定掉道具

### 道具系統

擊殺敵機有 5% 基礎機率掉落道具（可透過碎片提升），Boss 必定掉落。共有八種道具：

| 道具 | 圖示 | 效果 |
|------|------|------|
| **武力升級 (W)** | 黃色 W | 主武器升級，最高 Lv5 |
| **雷電武器 (T)** | 紫色 T | 自動追蹤雷球，最高 Lv5 |
| **電漿護盾 (S)** | 藍色 S | 護盾 +1 層（最多 3 層），可擋傷害 |
| **戰機修復 (H)** | 紅色 H | 生命 +1（上限 3） |
| **僚機 (A)** | 橙色 A | 僚機編隊，最高 Lv5，自動射擊 |
| **時間減速 (X)** | 紫色 X | 全場減速 8 秒（稀有） |
| **雙倍分數 ($)** | 金色 $ | 分數 ×2 持續 15 秒 |
| **護衛球 (O)** | 綠色 O | 環繞戰機的軌道武器，最高 Lv3，接觸即傷敵 |

> **注意**：被擊中時（無護盾），**所有可升級武器都會重置為碎片基礎值**，護盾也會清零。

### 主武器等級 (W)

| 等級 | 彈道 | 顏色 | 特殊能力 |
|------|------|------|----------|
| Lv1 | 1 發直射 | 青色 `#00FFFF` | - |
| Lv2 | 2 發平行 | 青色 `#00FFFF` | - |
| Lv3 | 3 發扇形 | 青色 `#00FFFF` | - |
| Lv4 | 3 發扇形 | 金色 `#FFD700` | 命中後散射 3 枚橙色彈片 |
| Lv5 | 5 發扇形 | 綠色 `#00FF88` | **貫穿**：子彈穿透敵機不消失 |

### 雷電武器等級 (T)

獨立的第二武器，與主武器並存。**自動發射**追蹤雷球，不需按鍵。

| 等級 | 發射間隔 | 數量 | 追蹤速度 | 傷害 | 特殊 |
|------|----------|------|----------|------|------|
| Lv1 | 1.5 秒 | 1 顆 | 3 | 1 | - |
| Lv2 | 1.2 秒 | 1 顆 | 4 | 2 | - |
| Lv3 | 1.0 秒 | 2 顆 | 4 | 2 | - |
| Lv4 | 0.8 秒 | 2 顆 | 5 | 2 | 命中爆炸（半徑 40px，範圍 1 傷害） |
| Lv5 | 0.6 秒 | 3 顆 | 5 | 3 | 命中爆炸（半徑 60px，範圍 2 傷害） |

- 雷球為紫色圓形，帶紫色光暈
- 顏色隨等級從 `#AA77FF` 漸亮到 `#EECCFF`
- Lv4+ 命中時產生紫/白色電弧爆炸粒子

### 僚機系統 (A)

| 等級 | 僚機數 | 射擊間隔 | 特殊 |
|------|--------|----------|------|
| Lv1 | 1 架（左） | 400ms | - |
| Lv2 | 2 架（左右） | 400ms | - |
| Lv3 | 3 架 | 400ms | - |
| Lv4+ | 最多 5 架 | 280ms | 更快射速 |

### 護衛球系統 (O)

環繞戰機旋轉的軌道武器，最高 Lv3，敵機碰觸即受傷害。

### Boss 機制

- 每 5 關出現（第 5、10、15 關...）
- HP = `(80 + 關卡數 × 20) × 2`
- 射擊頻率 = `(0.05 + 關卡數 × 0.005) × 1.3`
- 多階段攻擊模式（追蹤彈、雷射警告線）
- 必定掉落道具
- Boss 擊敗後有專屬過場動畫

### 獎勵關卡（Bonus Stage）

每 20 關出現一次獎勵關卡：
- 敵機不會射擊，僅飛掠通過
- 限時消滅所有敵機可獲得額外 5000 分
- 有倒數計時和結算畫面

### 碎片系統（永久升級）

擊殺 Boss 或特殊掉落可獲得金色碎片道具，提供本局永久升級：

| 升級項目 | 最高等級 | 效果 |
|----------|----------|------|
| 初始武器 | +3 | 被擊中後武器不會降回 Lv1 |
| 道具掉落率 | +5 | 每級 +2% 掉落率 |
| 初始護盾 | +2 | 開局自帶護盾 |
| 移動速度 | +3 | 戰機移動更快 |
| 初始護衛球 | +3 | 開局自帶護衛球 |

### 難度曲線

| 要素 | 遞增方式 |
|------|----------|
| 敵機數量 | 每 5 關 +10%（敵機自動縮小） |
| 敵機子彈速度 | 每關 +1% |
| Boss HP | 隨關卡線性增加並加倍 |
| Boss 子彈量 | 基礎射擊率 ×1.3 |
| 俯衝頻率 | 隨 difficultyFactor 線性增加 |

### 線上排行榜

- 遊戲結束後可輸入暱稱上傳分數
- 即時查看全球 Top 100 排名與自己的名次
- 開始畫面也可查看排行榜
- 後端使用 Supabase 託管

## 開發

### 安裝與啟動

```bash
npm install
npm run dev
```

### 建構

```bash
npm run build
```

### 技術棧

- **React 18** + **TypeScript**
- **Vite** 建構工具
- **Tailwind CSS** UI 樣式
- **HTML5 Canvas** 遊戲渲染
- **Web Audio API** 8-bit 音效與 BGM
- **Supabase** 線上排行榜後端
- **Lucide React** 圖示

### 專案結構

```
src/
├── App.tsx                  # 主應用元件
├── main.tsx                 # 入口點
├── index.css                # 全域樣式 (Tailwind)
├── components/
│   └── GalagaGame.tsx       # 遊戲核心（所有遊戲邏輯）
└── utils/
    ├── audio.ts             # Web Audio 音效管理
    └── supabase.ts          # 排行榜 API 客戶端
```

## 部署

### GitHub Pages

本專案已設定 GitHub Actions 自動部署到 **GitHub Pages**：

1. 推送程式碼到 `main` 分支後，在 repo **Settings → Pages** 中，將 **Source** 設為 **GitHub Actions**。
2. 之後每次 push 到 `main` 都會自動建構並部署。
3. 遊戲網址：**https://scorpioliu0953.github.io/bees_game/**

### Netlify

本專案包含 `netlify.toml`，連結 GitHub 儲存庫後可改為 Netlify 自動建構部署。

### 手動部署

```bash
npm run build
# 將 dist/ 資料夾部署到任意靜態託管服務
```

## 授權

MIT License
